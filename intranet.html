<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Cliff Intranet</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary: #0A0A0A;
            --secondary: #1A1A1A;
            --accent: #FFD700;
            --accent-dark: #FFA500;
            --accent-glow: rgba(255, 215, 0, 0.4);
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --surface: #141414;
            --surface-light: #1F1F1F;
            --border: rgba(255, 215, 0, 0.3);
            --shadow: rgba(0, 0, 0, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--surface) 100%);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
            user-select: none;
            -webkit-user-select: none;
        }

        /* Background animated grid */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(90deg, rgba(255, 215, 0, 0.04) 1px, transparent 1px),
                linear-gradient(rgba(255, 215, 0, 0.04) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
            opacity: 0.5;
            animation: gridPulse 8s ease-in-out infinite;
        }

        @keyframes gridPulse {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 0.6;
            }
        }

        /* ========== LAYOUT RESPONSIVE ========== */
        .container {
            height: 100vh;
            display: grid;
            grid-template-rows: 100px 1fr;
            grid-template-columns: 280px 1fr;
            gap: 0;
            position: relative;
            z-index: 1;
        }

        /* Para pantallas más pequeñas */
        @media (max-height: 800px) {
            .container {
                grid-template-rows: 80px 1fr;
                grid-template-columns: 250px 1fr;
            }

            .header {
                padding: 15px;
            }

            .logo-img {
                max-width: 400px;
            }

            .sidebar {
                padding: 20px 15px;
                gap: 15px;
            }

            .nav-button {
                padding: 20px 25px;
                font-size: 22px;
            }

            .content {
                padding: 30px 40px;
            }
        }

        /* Para pantallas muy pequeñas */
        @media (max-height: 600px) {
            .container {
                grid-template-rows: 70px 1fr;
                grid-template-columns: 220px 1fr;
            }

            .nav-button {
                padding: 15px 20px;
                font-size: 18px;
            }

            .welcome-title {
                font-size: 48px;
            }

            .welcome-text {
                font-size: 20px;
            }
        }

        /* Header */
        .header {
            grid-column: 1 / -1;
            background: linear-gradient(180deg, var(--surface) 0%, var(--surface-light) 100%);
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
            min-height: 80px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-img {
            max-width: 500px;
            height: auto;
            max-height: 60px;
            object-fit: contain;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            animation: scanLine 3s linear infinite;
        }

        @keyframes scanLine {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .logo-container {
            text-align: center;
            animation: fadeInDown 0.8s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Estilos para la información del usuario */
        #current-user {
            color: var(--accent);
            font-size: 14px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 600;
            padding: 8px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            border: 1px solid var(--border);
            line-height: 1.4;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Badges para roles - NUEVOS COLORES */
        .role-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 6px;
            display: inline-block;
        }

        .admin-badge {
            background: #FFD700;
            /* Dorado - Máximo poder */
            color: #000;
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
        }

        .directivo-badge {
            background: #9C27B0;
            /* Púrpura - Alta dirección */
            color: white;
            box-shadow: 0 0 8px rgba(156, 39, 176, 0.3);
        }

        .comite-badge {
            background: #2196F3;
            /* Azul profesional - Comité */
            color: white;
            box-shadow: 0 0 8px rgba(33, 150, 243, 0.3);
        }

        .adn-badge {
            background: #4CAF50;
            /* Verde - Grupo ADN */
            color: white;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.3);
        }

        .empleado-badge {
            background: #607D8B;
            /* Gris azulado - Empleado base */
            color: white;
            box-shadow: 0 0 8px rgba(96, 125, 139, 0.3);
        }

        /* Sidebar Navigation */
        .sidebar {
            background: var(--surface-light);
            border-right: 2px solid var(--border);
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: relative;
            animation: slideInLeft 0.8s ease-out;
            min-height: 0;
            overflow: hidden;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .sidebar::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, transparent, var(--accent), transparent);
            opacity: 0.3;
        }

        .nav-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 28px;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 15px;
            padding-left: 10px;
            text-align: center;
        }

        .nav-button {
            background: linear-gradient(135deg, var(--surface) 0%, var(--surface-light) 100%);
            border: 2px solid var(--border);
            color: var(--text-primary);
            padding: 22px 25px;
            font-size: 22px;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-align: left;
            letter-spacing: 1px;
            width: 100%;
            white-space: nowrap;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, var(--accent-glow), transparent);
            transition: left 0.5s ease;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button::after {
            content: '';
            position: absolute;
            top: 50%;
            right: 20px;
            width: 8px;
            height: 8px;
            border-right: 2px solid var(--accent);
            border-bottom: 2px solid var(--accent);
            transform: translateY(-50%) rotate(-45deg);
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--surface) 100%);
            border-color: var(--accent);
            transform: translateX(8px);
            box-shadow: 0 8px 25px var(--accent-glow);
        }

        .nav-button:active {
            transform: translateX(8px) scale(0.98);
        }

        .nav-button.active {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--surface) 100%);
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow), inset 0 0 15px rgba(255, 215, 0, 0.1);
        }

        .nav-button.active::after {
            right: 18px;
        }

        /* Sección de navegación con scroll si es necesario */
        .nav-buttons-container {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
            margin-bottom: 15px;
        }

        .nav-buttons-container::-webkit-scrollbar {
            width: 6px;
        }

        .nav-buttons-container::-webkit-scrollbar-track {
            background: var(--surface);
            border-radius: 3px;
        }

        .nav-buttons-container::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent) 0%, var(--accent-dark) 100%);
            border-radius: 3px;
        }

        /* Content Area */
        .content {
            padding: 35px 45px;
            overflow-y: auto;
            animation: fadeIn 1s ease-out;
            height: 100%;
        }

        .content.full-iframe {
            padding: 0;
        }

        .content.full-iframe iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .content::-webkit-scrollbar {
            width: 10px;
        }

        .content::-webkit-scrollbar-track {
            background: var(--surface);
            border-radius: 8px;
        }

        .content::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent) 0%, var(--accent-dark) 100%);
            border-radius: 8px;
        }

        .welcome-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: 20px;
        }

        /* Logo animado con imagen grande y halo blanco */
        .logo-animado {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 50px;
            animation: pulse-gentle 3s ease-in-out infinite;
        }

        /* Halo blanco sutil alrededor */
        .logo-animado::before {
            content: '';
            position: absolute;
            width: 280px;
            height: 280px;
            border-radius: 50%;
            background: radial-gradient(circle at center,
                    rgba(255, 255, 255, 0.25) 0%,
                    rgba(255, 255, 255, 0.15) 30%,
                    rgba(255, 255, 255, 0.05) 50%,
                    transparent 70%);
            z-index: 1;
            animation: halo-pulse 4s ease-in-out infinite;
        }

        /* IMAGEN MÁS GRANDE */
        .logo-animado img {
            width: 240px;
            height: 240px;
            object-fit: contain;
            position: relative;
            z-index: 2;
            filter: brightness(1.05) contrast(1.1);
        }

        @keyframes pulse-gentle {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.03);
            }
        }

        @keyframes halo-pulse {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1);
            }

            50% {
                opacity: 0.9;
                transform: scale(1.05);
            }
        }

        /* Versión responsive para mantener proporciones */
        @media (max-height: 800px) {
            .logo-animado {
                margin-bottom: 40px;
            }

            .logo-animado::before {
                width: 230px;
                height: 230px;
            }

            .logo-animado img {
                width: 210px;
                height: 210px;
            }
        }

        @media (max-height: 600px) {
            .logo-animado {
                margin-bottom: 30px;
            }

            .logo-animado::before {
                width: 200px;
                height: 200px;
            }

            .logo-animado img {
                width: 180px;
                height: 180px;
            }
        }

        .welcome-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 52px;
            letter-spacing: 3px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .welcome-text {
            font-size: 22px;
            color: var(--text-secondary);
            max-width: 600px;
            line-height: 1.5;
            font-weight: 300;
        }

        .content-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
        }

        .content-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 46px;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .content-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            font-weight: 300;
            line-height: 1.4;
        }

        /* Video Grid */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .video-item {
            background: linear-gradient(135deg, var(--surface-light) 0%, var(--surface) 100%);
            border: 2px solid var(--border);
            border-radius: 14px;
            padding: 18px;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .video-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px var(--shadow);
            border-color: var(--accent);
        }

        .video-item iframe {
            width: 100%;
            height: 200px;
            border-radius: 10px;
            border: none;
        }

        .video-item p {
            text-align: center;
            margin-top: 12px;
            font-size: 18px;
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Utility animations */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Touch feedback */
        .touch-feedback {
            position: fixed;
            pointer-events: none;
            border-radius: 50%;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            animation: ripple 0.6s ease-out;
            z-index: 9999;
        }

        @keyframes ripple {
            from {
                width: 0;
                height: 0;
                opacity: 1;
            }

            to {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        /* Estilos para el logout - FIJADO EN LA PARTE INFERIOR */
        .user-section {
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            flex-shrink: 0;
        }

        #logout-btn {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            white-space: nowrap;
        }

        #logout-btn:hover {
            background: var(--accent);
            color: var(--primary);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        /* Scroll personalizado para navegadores modernos */
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: var(--surface);
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--accent) 0%, var(--accent-dark) 100%);
            border-radius: 3px;
        }

        /* Para Firefox */
        .sidebar {
            scrollbar-width: thin;
            scrollbar-color: var(--accent) var(--surface);
        }

        /* ========== ESTILOS PARA CUMPLEAÑOS ========== */
        .birthday-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 10px;
        }

        .birthday-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
            transition: all 0.3s ease;
        }

        .birthday-item:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(5px);
        }

        .birthday-photo {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid var(--accent);
            background: var(--surface);
        }

        .birthday-info {
            flex: 1;
        }

        .birthday-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 16px;
            margin-bottom: 3px;
        }

        .birthday-date {
            color: var(--accent);
            font-size: 14px;
            font-weight: 500;
        }

        .birthday-department {
            color: var(--text-secondary);
            font-size: 13px;
            margin-top: 2px;
        }

        .no-birthdays {
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
            padding: 30px;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 10px;
            border: 1px dashed var(--border);
        }

        /* ========== ESTILOS RESPONSIVE PARA RH ========== */
        /* Contenedor para desktop - lado a lado */
        .rh-grid-desktop {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        /* Contenedor para móvil - uno encima del otro */
        .rh-grid-mobile {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 40px;
        }

        /* Estilos para las tarjetas */
        .rh-card {
            background: linear-gradient(135deg, var(--surface-light) 0%, var(--surface) 100%);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 30px;
        }

        .rh-card h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            letter-spacing: 2px;
            color: var(--accent);
            margin-bottom: 20px;
            text-align: center;
        }

        /* Imagen del menú */
        .menu-image-container {
            width: 100%;
            height: 500px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--border);
            background: var(--surface);
        }

        .menu-image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .menu-updated {
            text-align: center;
            margin-top: 20px;
            color: var(--text-secondary);
            font-size: 16px;
        }

        /* Contenedor de cumpleaños */
        .birthdays-container {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* ========== MENÚ HAMBURGUESA PARA MÓVIL ========== */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: var(--surface-light);
            border: 2px solid var(--border);
            border-radius: 10px;
            z-index: 1000;
            cursor: pointer;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 6px;
            box-shadow: 0 4px 15px var(--shadow);
        }

        .mobile-menu-toggle span {
            display: block;
            width: 25px;
            height: 3px;
            background: var(--accent);
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .mobile-menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .mobile-menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        /* Mobile sidebar overlay */
        .mobile-sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 999;
            backdrop-filter: blur(5px);
        }

        .mobile-sidebar-overlay.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        /* Mobile sidebar */
        .mobile-sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100%;
            background: var(--surface-light);
            border-right: 2px solid var(--border);
            z-index: 1000;
            transition: left 0.3s ease;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        .mobile-sidebar.active {
            left: 0;
            box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
        }

        .mobile-user-section {
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        /* Botón de logout para móvil - CON CSS COMPLETO */
        #logout-btn-mobile {
            background: transparent;
            border: 2px solid var(--accent);
            color: var(--accent);
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            font-family: 'Outfit', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            white-space: nowrap;
            margin-top: 10px;
        }

        #logout-btn-mobile:hover {
            background: var(--accent);
            color: var(--primary);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                grid-template-rows: 80px 1fr;
            }

            .header {
                justify-content: center;
                padding: 15px 60px;
            }

            .logo-img {
                max-width: 300px;
                max-height: 50px;
            }

            .sidebar {
                display: none;
            }

            .content {
                padding: 20px;
                width: 100%;
            }

            .mobile-menu-toggle {
                display: flex;
            }

            .welcome-title {
                font-size: 42px;
            }

            .welcome-text {
                font-size: 18px;
                padding: 0 15px;
            }

            .logo-animado::before {
                width: 200px;
                height: 200px;
            }

            .logo-animado img {
                width: 180px;
                height: 180px;
            }

            .content-header {
                margin-bottom: 20px;
            }

            .content-title {
                font-size: 36px;
            }

            .video-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .nav-button {
                padding: 18px 20px;
                font-size: 18px;
                margin-bottom: 10px;
            }

            .nav-title {
                font-size: 24px;
                margin-bottom: 20px;
            }

            .rh-grid-desktop {
                display: none;
            }

            .rh-grid-mobile {
                display: flex;
            }

            .rh-card {
                padding: 20px;
            }

            .menu-image-container {
                height: 400px;
            }

            .rh-card h3 {
                font-size: 28px;
            }

            /* Ajustes para cumpleaños en móvil */
            .birthday-item {
                padding: 10px;
                gap: 12px;
            }

            .birthday-photo {
                width: 50px;
                height: 50px;
            }

            .birthday-name {
                font-size: 15px;
            }

            .birthday-date {
                font-size: 13px;
            }

            .birthday-department {
                font-size: 12px;
            }
        }

        /* Agrega esto en tu sección de estilos <style> */
        @media (max-width: 768px) {
            .acordeon-header {
                cursor: pointer !important;
                -webkit-tap-highlight-color: rgba(255, 215, 0, 0.3) !important;
                user-select: none !important;
                -webkit-user-select: none !important;
                padding: 25px 20px !important;
                min-height: 60px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: space-between !important;
                touch-action: manipulation;
                /* Mejora rendimiento táctil */
            }

            .acordeon-content {
                transition: max-height 0.4s ease !important;
                overflow: hidden !important;
                will-change: max-height;
                /* Mejora rendimiento de animación */
            }

            .acordeon-content.active {
                max-height: 5000px !important;
            }

            /* Mejorar feedback táctil */
            .acordeon-header:active {
                background: linear-gradient(135deg, var(--secondary) 0%, var(--surface) 100%) !important;
                transform: scale(0.98) !important;
                transition: transform 0.1s ease !important;
            }

            /* Evitar selección de texto en móvil */
            .acordeon-header * {
                user-select: none !important;
                -webkit-user-select: none !important;
            }
        }

        @media (min-width: 769px) {
            .rh-grid-desktop {
                display: grid;
            }

            .rh-grid-mobile {
                display: none;
            }

            .mobile-menu-toggle {
                display: none;
            }

            .mobile-sidebar-overlay {
                display: none !important;
            }

            .mobile-sidebar {
                display: none !important;
            }
        }

        /* Para tablets */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                grid-template-columns: 250px 1fr;
            }

            .content {
                padding: 25px 30px;
            }

            .nav-button {
                padding: 18px 20px;
                font-size: 20px;
            }

            .video-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }

        /* ========== ESTILOS PARA LA SECCIÓN PRODUCTOS ========== */
        .productos-section {
            margin-top: 40px;
        }

        /* Acordeón/Desplegable */
        .acordeon {
            margin-bottom: 25px;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            background: var(--surface-light);
        }

        .acordeon-header {
            background: linear-gradient(135deg, var(--surface) 0%, var(--surface-light) 100%);
            padding: 20px;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 32px;
            letter-spacing: 2px;
            color: var(--accent);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .acordeon-header:hover {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--surface) 100%);
        }

        .acordeon-header.active {
            border-bottom: 2px solid var(--accent);
        }

        .acordeon-icon {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .acordeon-header.active .acordeon-icon {
            transform: rotate(180deg);
        }

        .acordeon-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
        }

        .acordeon-content.active {
            padding: 25px;
            max-height: 2000px;
        }

        /* Grid de productos */
        .productos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            padding: 10px;
        }

        @media (max-width: 768px) {
            .productos-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
        }

        /* Botones de producto (imágenes) */
        .producto-btn {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .producto-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 25px var(--accent-glow);
        }

        .producto-btn:active {
            transform: translateY(-5px) scale(0.98);
        }

        .producto-btn img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
            border: 2px solid var(--border);
            transition: border-color 0.3s ease;
        }

        .producto-btn:hover img {
            border-color: var(--accent);
        }

        /* Overlay para el botón */
        .producto-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.8);
            color: var(--accent);
            padding: 8px;
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: 0 0 8px 8px;
        }

        .producto-btn:hover .producto-overlay {
            opacity: 1;
        }

        /* Modal para confirmar descarga */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--surface-light) 0%, var(--surface) 100%);
            border: 2px solid var(--accent);
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 36px;
            color: var(--accent);
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .modal-text {
            color: var(--text-secondary);
            margin-bottom: 25px;
            font-size: 18px;
            line-height: 1.5;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .modal-btn {
            padding: 12px 30px;
            border-radius: 8px;
            border: 2px solid var(--accent);
            background: transparent;
            color: var(--accent);
            font-family: 'Outfit', sans-serif;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
        }

        .modal-btn:hover {
            background: var(--accent);
            color: var(--primary);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        .modal-btn.cancel {
            border-color: var(--text-secondary);
            color: var(--text-secondary);
        }

        .modal-btn.cancel:hover {
            background: var(--text-secondary);
            color: var(--primary);
        }

        /* Agrega esto a tu sección de estilos CSS */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 204, 0, 0.3);
            border-radius: 50%;
            border-top-color: #ffcc00;
            animation: spin 1s ease-in-out infinite;
            vertical-align: middle;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <!-- Botón de menú hamburguesa para móvil -->
    <div class="mobile-menu-toggle" id="mobileMenuToggle">
        <span></span>
        <span></span>
        <span></span>
    </div>

    <!-- Overlay para móvil -->
    <div class="mobile-sidebar-overlay" id="mobileOverlay"></div>

    <!-- Sidebar para móvil -->
    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="nav-title">MENÚ</div>

        <div class="nav-buttons-container">
            <button class="nav-button active" data-section="inicio">Inicio</button>
            <button class="nav-button" data-section="adn">ADN Cliff</button>
            <button class="nav-button" data-section="avisos">Avisos</button>
            <button class="nav-button" data-section="humanos">RH</button>
            <button class="nav-button" data-section="productos">Productos</button>
            <button class="nav-button" data-section="docs" id="docs-button-mobile">Reglamento</button>
        </div>

        <div class="mobile-user-section">
            <div id="current-user-mobile"></div>
            <button id="logout-btn-mobile">Cerrar Sesión</button>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-container">
                <img src="img/logo.png" alt="Cliff and Company" class="logo-img">
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <div class="nav-title">MENÚ</div>

            <!-- Contenedor para botones con scroll si es necesario -->
            <div class="nav-buttons-container">
                <button class="nav-button active" data-section="inicio">Inicio</button>
                <button class="nav-button" data-section="adn">ADN Cliff</button>
                <button class="nav-button" data-section="avisos">Avisos</button>
                <button class="nav-button" data-section="humanos">RH</button>
                <button class="nav-button" data-section="productos">Productos</button>
                <button class="nav-button" data-section="docs" id="docs-button">Reglamento</button>
            </div>

            <!-- Sección de usuario y logout -->
            <div class="user-section">
                <div id="current-user"></div>
                <button id="logout-btn">Cerrar Sesión</button>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content" id="content-area">
            <!-- Welcome Screen - Se carga dinámicamente desde JavaScript -->
        </div>
    </div>

    <!-- Modal para confirmar descarga -->
    <div class="modal-overlay" id="downloadModal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle">Descargar Ficha Técnica</h3>
            <p class="modal-text" id="modalText">¿Estás seguro de que quieres descargar la ficha técnica?</p>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelDownload">Cancelar</button>
                <button class="modal-btn" id="confirmDownload">Descargar</button>
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURACIÓN DE ROLES ==========
        const permisosPorRol = {
            'admin': {
                nombre: 'Administrador',
                permisos: ['inicio', 'adn', 'avisos', 'humanos', 'productos', 'docs'],
                color: 'admin'
            },
            'directivo': {
                nombre: 'Directivo',
                permisos: ['inicio', 'adn', 'avisos', 'humanos', 'docs'],
                color: 'directivo'
            },
            'comite': {
                nombre: 'Comité',
                permisos: ['inicio', 'adn', 'avisos', 'humanos', 'docs'],
                color: 'comite'
            },
            'adn': {
                nombre: 'Grupo ADN',
                permisos: ['inicio', 'adn', 'avisos', 'humanos', 'docs'],
                color: 'adn'
            },
            'empleado': {
                nombre: 'Empleado',
                permisos: ['inicio', 'avisos', 'humanos', 'docs'],
                color: 'empleado'
            }
        };

        // ASIGNAR ROLES A USUARIOS
        const rolesUsuarios = {
            // ADMINISTRADORES
            'luis': 'admin',

            // GRUPO ADN (15 usuarios)
            'tovar': 'adn',
            'marisela': 'adn',
            'laura': 'adn',
            'rosy': 'adn',
            'maikel': 'adn',
            'david': 'adn',
            'pepe': 'adn',
            'pamela': 'adn',
            'patricia': 'adn',
            'hugo': 'adn',
            'cesar': 'adn',
            'xavier': 'adn',
            'max': 'adn',
            'jorge': 'adn',
            'capac': 'adn',

            // COMITÉ (5 usuarios)
            'sara': 'comite',
            'zepeda': 'comite',
            'leonardo': 'comite',
            'armando': 'comite',
            'angel': 'comite',

            // DIRECTIVOS (2 usuarios)
            'josealfredo': 'directivo',
            'gerardo': 'directivo'

            // NOTA: Los usuarios que no estén en esta lista serán 'empleado' por defecto
        };

        // ========== DATOS DE CUMPLEAÑOS ==========
        const birthdaysData = [
            {
                name: "Juan Pérez",
                date: "5 de Enero",
                department: "Ventas",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "María García",
                date: "12 de Enero",
                department: "Marketing",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "Carlos López",
                date: "18 de Enero",
                department: "Producción",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "Ana Martínez",
                date: "22 de Enero",
                department: "RH",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "Roberto Sánchez",
                date: "28 de Enero",
                department: "Logística",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "Laura Fernández",
                date: "3 de Febrero",
                department: "Finanzas",
                photo: "img/cumpleaños/foto.png"
            },
            {
                name: "Miguel Rodríguez",
                date: "8 de Febrero",
                department: "IT",
                photo: "img/cumpleaños/foto.png"
            }
        ];

        // ========== DATOS DE PRODUCTOS ==========
        const productosData = {
            inyeccion: [
                {
                    img: "img/Inyeccion/bot-0062.png",
                    drive: "https://drive.google.com/uc?export=download&id=1zaLIiKKrpc95sCFSFlYOQYMFbldrb0qT"
                },
                {
                    img: "img/Inyeccion/bot-0313.png",
                    drive: "https://drive.google.com/uc?export=download&id=1jMA1Hl3djmIy75wybAEH7lbw-lVI97AA"
                },
                {
                    img: "img/Inyeccion/bot-0313-C.png",
                    drive: "https://drive.google.com/uc?export=download&id=1xqMil_iy-rDp8vEu5u_t6ZY4g6MGV6gg"
                },
                {
                    img: "img/Inyeccion/bot-0318.png",
                    drive: "https://drive.google.com/uc?export=download&id=1bifgxRKmQRWlro_axFWF28CLveKwxZWw"
                },
                {
                    img: "img/Inyeccion/bot-0318-C.png",
                    drive: "https://drive.google.com/uc?export=download&id=1-EirXX0yJGejHzXSeh4I-aKb62gcTnI3"
                },
                {
                    img: "img/Inyeccion/bot-0325.png",
                    drive: "https://drive.google.com/uc?export=download&id=1d6xbaXhPXP9QbdIx90gZbsF-75W5aXRn"
                },
                {
                    img: "img/Inyeccion/bot-0329.png",
                    drive: "https://drive.google.com/uc?export=download&id=135_XEfUwIVCC5REn_UdFaLUIgAhxFn7C"
                },
                {
                    img: "img/Inyeccion/bot-0355.png",
                    drive: "https://drive.google.com/uc?export=download&id=1WIXQsz2xv4y5hurgJzTFoffbbD5VUw1j"
                },
                {
                    img: "img/Inyeccion/bot-0409-C.png",
                    drive: "https://drive.google.com/uc?export=download&id=18BdTSL9ZNx5ir5QgeViLDcFm53pbeXVh"
                },
                {
                    img: "img/Inyeccion/bot-0409.png",
                    drive: "https://drive.google.com/uc?export=download&id=13HtuA1bMNk8PfmTIBHlpI0e52RmpXUqW"
                },
                {
                    img: "img/Inyeccion/bot-0412-C.png",
                    drive: "https://drive.google.com/uc?export=download&id=1owxNM-rfvnNEveNr-Jd7vVqKs4iVsoZR"
                },
                {
                    img: "img/Inyeccion/bot-0412-N.png",
                    drive: "https://drive.google.com/uc?export=download&id=10zA3XxfIYcMY0A3vkzc8nDuc8L_KX2iJ"
                },
                {
                    img: "img/Inyeccion/bot-0417.png",
                    drive: "https://drive.google.com/uc?export=download&id=1eY0gnTQ8AKVmLOFpAMEBdigA7BZgwOTW"
                },
                {
                    img: "img/Inyeccion/bot-0419-Na.png",
                    drive: "https://drive.google.com/uc?export=download&id=1WijiDLRjTIdnSbOBinxEEgm1LJUGAvhK"
                },
                {
                    img: "img/Inyeccion/bot-0419-Nam.png",
                    drive: "https://drive.google.com/uc?export=download&id=1oj87QHh1PmVPKx2tmQUBWNkzr_rR5fsD"
                },
                {
                    img: "img/Inyeccion/bot-0421-Na.png",
                    drive: "https://drive.google.com/uc?export=download&id=11gHENdXLhw-_X3b3b5SpOEAqW3S9Vf82"
                },
                {
                    img: "img/Inyeccion/bot-0421-Nam.png",
                    drive: "https://drive.google.com/uc?export=download&id=1p-0Rs0WqCG9MsQr76W96h8fEkoI1m-2O"
                },
                {
                    img: "img/Inyeccion/bot-0510.png",
                    drive: "https://drive.google.com/uc?export=download&id=14H5o8WFVLkdvGdjlau0uuVuWqH2nHoEq"
                },
                {
                    img: "img/Inyeccion/bot-0518.png",
                    drive: "https://drive.google.com/uc?export=download&id=1Jmp22x9tl1Wc5m8Mdh42TQ2VHz_S4wAp"
                },
                {
                    img: "img/Inyeccion/bot-0526.png",
                    drive: "https://drive.google.com/uc?export=download&id=19lLc2Nixwn6oJkIBQWMGY6gSry84rvXy"
                },
                {
                    img: "img/Inyeccion/bot-0527.png",
                    drive: "https://drive.google.com/uc?export=download&id=1U4FqZ-7_TVAqonjEv7ZQ3ktMcqJO4MWM"
                }
            ],
            pegado: [
                {
                    img: "img/Pegado/bot-0301-cafe.png",
                    drive: "https://drive.google.com/uc?export=download&id=1XMbF1gAbyFjhvWSESEoTpaSBbb9Jx0E4"
                },
                {
                    img: "img/Pegado/bot-0301-negro.png",
                    drive: "https://drive.google.com/uc?export=download&id=1jMA1Hl3djmIy75wybAEH7lbw-lVI97AA"
                },
                {
                    img: "img/Pegado/bot-0310-chocolate.png",
                    drive: "https://drive.google.com/uc?export=download&id=1dFydZkZEsPi6nD-sCxqQrb0k7geSiq-z"
                },
                {
                    img: "img/Pegado/bot-0310-negro_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1_LU8AC5eDf74b9glRibRKT2xhrKjLw1B"
                },
                {
                    img: "img/Pegado/bot-0420-negro.png",
                    drive: "https://drive.google.com/uc?export=download&id=1vNPU3u5E8wR8u1ascnoYd2zF8AHSHe9j"
                },
                {
                    img: "img/Pegado/bot-0520-cafe.png",
                    drive: "https://drive.google.com/uc?export=download&id=1gUinDoXKVZcwO1TgzJjj-IsO7f5Mcw_h"
                },
                {
                    img: "img/Pegado/bot-0481-fiusha.png",
                    drive: "https://drive.google.com/uc?export=download&id=1Dir89Z4WUOLbwCgxspSDFmWeDyB-B1YN"
                },
                {
                    img: "img/Pegado/bot-0510-negro_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1CRwL8FDB-b9DeT2itzObfdkrC_7cVCTj"
                },
                {
                    img: "img/Pegado/bot-0513-chocolate_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=183Q81_sOaLTiCPoR-HN8gjvO_BX4hNJ4"
                },
                {
                    img: "img/Pegado/bot-0513-negro_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1WWGm5yqBH-UsIKa3usQJH5Gpdd2gg-IR"
                },
                {
                    img: "img/Pegado/0936-negro.png",
                    drive: "https://drive.google.com/uc?export=download&id=1FipdkX9IvQDzPVvOPWjhjKknUAwklTcJ"
                },
                {
                    img: "img/Pegado/bot-0939-fiusha.png",
                    drive: "https://drive.google.com/uc?export=download&id=1XPGFBiTDiKCtWhX-X1xT5AwxaZaDmFNj"
                },
                {
                    img: "img/Pegado/bot-0947-naranja_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1KnMnp_SVp9PZNS_rpWWGyr4T6S6p6dnT"
                },
                {
                    img: "img/Pegado/bot-0948-azul_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1H1ryD2pSKdfwxNl-Hz2qZ5sWcy4pkAjG"
                },
                {
                    img: "img/Pegado/bot-0948-oxford.png",
                    drive: "https://drive.google.com/uc?export=download&id=1cGoqiF66uiFSuz_8KbX8kC9nvtj103W2"
                },
                {
                    img: "img/Pegado/bot-0955-cafe_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1aqxVNN4DHKvGvJf7BaTtRndQUv8EMl7X"
                },
                {
                    img: "img/Pegado/bot-0955-negro_1.png",
                    drive: "https://drive.google.com/uc?export=download&id=1b5YwXFtSSuK2C8R7Gt9iXBLmnRwAon3H"
                }
            ]
        };

        let usuarioInfo = null;
        let rolUsuario = null;
        let permisosUsuario = [];

        // ========== FUNCIONES PRINCIPALES ==========
        function obtenerUsuarioActual() {
            const userData = localStorage.getItem('currentUser');

            if (!userData) {
                return null;
            }

            return JSON.parse(userData);
        }

        function obtenerRolUsuario(username) {
            const userLower = username.toLowerCase();
            return rolesUsuarios[userLower] || 'empleado';
        }

        function aplicarPermisosEnUI() {
            const navButtons = document.querySelectorAll('.nav-button');
            const mobileNavButtons = document.querySelectorAll('#mobileSidebar .nav-button');
            const userDisplay = document.getElementById('current-user');
            const userDisplayMobile = document.getElementById('current-user-mobile');

            // Obtener información del rol
            const infoRol = permisosPorRol[rolUsuario];

            // Mostrar nombre completo y rol en desktop
            if (userDisplay && infoRol && usuarioInfo && usuarioInfo.nombreCompleto) {
                userDisplay.innerHTML = `
                    <div style="font-size: 16px; margin-bottom: 5px;">${usuarioInfo.nombreCompleto}</div>
                    <span class="role-badge ${infoRol.color}-badge">
                        ${infoRol.nombre}
                    </span>
                `;
            } else if (userDisplay && infoRol && usuarioInfo) {
                userDisplay.innerHTML = `
                    <div style="font-size: 16px; margin-bottom: 5px;">${usuarioInfo.username}</div>
                    <span class="role-badge ${infoRol.color}-badge">
                        ${infoRol.nombre}
                    </span>
                `;
            }

            // Mostrar nombre completo y rol en móvil
            if (userDisplayMobile && infoRol && usuarioInfo && usuarioInfo.nombreCompleto) {
                userDisplayMobile.innerHTML = `
                    <div style="font-size: 16px; margin-bottom: 5px;">${usuarioInfo.nombreCompleto}</div>
                    <span class="role-badge ${infoRol.color}-badge">
                        ${infoRol.nombre}
                    </span>
                `;
            } else if (userDisplayMobile && infoRol && usuarioInfo) {
                userDisplayMobile.innerHTML = `
                    <div style="font-size: 16px; margin-bottom: 5px;">${usuarioInfo.username}</div>
                    <span class="role-badge ${infoRol.color}-badge">
                        ${infoRol.nombre}
                    </span>
                `;
            }

            // Mostrar/ocultar botones según permisos en desktop
            navButtons.forEach(button => {
                const section = button.getAttribute('data-section');

                if (section === 'inicio') return;

                if (permisosUsuario.includes(section)) {
                    button.style.display = 'block';
                } else {
                    button.style.display = 'none';
                }
            });

            // Mostrar/ocultar botones según permisos en móvil
            mobileNavButtons.forEach(button => {
                const section = button.getAttribute('data-section');

                if (section === 'inicio') return;

                if (permisosUsuario.includes(section)) {
                    button.style.display = 'block';
                } else {
                    button.style.display = 'none';
                }
            });
        }

        function verificarPermisoSeccion(section) {
            if (section === 'inicio') return true;
            return permisosUsuario.includes(section);
        }

        function personalizarMensajeBienvenida() {
            const welcomeTitle = document.querySelector('.welcome-title');
            const welcomeText = document.querySelector('.welcome-text');

            if (welcomeTitle && welcomeText && usuarioInfo) {
                let nombreMostrar = usuarioInfo.username;

                if (usuarioInfo.nombreCompleto) {
                    nombreMostrar = usuarioInfo.nombreCompleto.split(' ')[0];
                }

                // Mensajes personalizados por rol
                const mensajesPorRol = {
                    'admin': `Bienvenido ${nombreMostrar}. Como Administrador, tienes acceso completo a todas las secciones.`,
                    'directivo': `Bienvenido ${nombreMostrar}. Como Directivo, tienes acceso a la mayoría de las secciones estratégicas.`,
                    'comite': `Bienvenido ${nombreMostrar}. Como miembro del Comité, tienes acceso a información administrativa.`,
                    'adn': `Bienvenido ${nombreMostrar}. Como miembro del Grupo ADN, mantente informado sobre nuestra cultura.`,
                    'empleado': `Bienvenido ${nombreMostrar}. Explora nuestro catálogo de calzado de protección y encuentra la solución perfecta para tu seguridad laboral.`
                };

                welcomeTitle.textContent = `Bienvenido ${nombreMostrar}`;
                welcomeText.textContent = mensajesPorRol[rolUsuario] || mensajesPorRol['empleado'];
            }
        }

        // Función para renderizar la lista de cumpleaños
        function renderBirthdays() {
            const birthdayContainers = document.querySelectorAll('.birthdays-container');

            birthdayContainers.forEach(container => {
                if (birthdaysData.length === 0) {
                    container.innerHTML = '<div class="no-birthdays">🎉 No hay cumpleaños este mes</div>';
                    return;
                }

                let html = '<div class="birthday-list">';

                birthdaysData.forEach(person => {
                    html += `
                        <div class="birthday-item">
                            <img src="${person.photo}" alt="${person.name}" class="birthday-photo">
                            <div class="birthday-info">
                                <div class="birthday-name">${person.name}</div>
                                <div class="birthday-date">🎂 ${person.date}</div>
                                <div class="birthday-department">${person.department}</div>
                            </div>
                        </div>
                    `;
                });

                html += '</div>';
                container.innerHTML = html;
            });
        }

        // ========== SISTEMA DE NAVEGACIÓN ==========
        const navButtons = document.querySelectorAll('.nav-button');
        const mobileNavButtons = document.querySelectorAll('#mobileSidebar .nav-button');
        const contentArea = document.getElementById('content-area');

        // ========== TEMPLATE PARA LA SECCIÓN PRODUCTOS ==========
        const productosTemplate = `
    <div class="fade-in">
        <div class="content-header">
            <h2 class="content-title">Fichas Técnicas</h2>
            <p class="content-subtitle">Descarga las fichas técnicas de nuestros productos. Haz clic en cualquier imagen para descargar el PDF.</p>
        </div>
        
        <div class="productos-section">
            <!-- Acordeón Inyección -->
            <div class="acordeon">
                <div class="acordeon-header" data-acordeon="inyeccion">
                    <span>Inyección</span>
                    <span class="acordeon-icon">▼</span>
                </div>
                <div class="acordeon-content" id="inyeccion-content">
                    <div class="productos-grid" id="inyeccion-grid">
                        <!-- Los botones se generarán dinámicamente -->
                    </div>
                </div>
            </div>
            
            <!-- Acordeón Pegado -->
            <div class="acordeon">
                <div class="acordeon-header" data-acordeon="pegado">
                    <span>Pegado</span>
                    <span class="acordeon-icon">▼</span>
                </div>
                <div class="acordeon-content" id="pegado-content">
                    <div class="productos-grid" id="pegado-grid">
                        <!-- Los botones se generarán dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>
`;

        // Content templates - CORREGIDO
        const contentTemplates = {
            inicio: `
        <div class="welcome-screen fade-in">
            <div class="logo-animado">
                <img src="img/mont.png" alt="Logo empresa" class="welcome-logo">
            </div>
            <h2 class="welcome-title">Bienvenido</h2>
            <p class="welcome-text">Explora nuestro catálogo de calzado de protección y encuentra la solución perfecta para tu seguridad laboral</p>
        </div>
    `,
            adn: `
        <div class="fade-in">
            <div class="content-header">
                <h2 class="content-title">ADN Cliff</h2>
                <p class="content-subtitle">Esta plataforma está diseñada para compartir materiales de capacitación y reforzar el conocimiento de todo el equipo de Cliff and Company.</p>
            </div>
            <div class="video-grid">
                <div class="video-item">
                    <iframe src="https://www.youtube.com/embed/3G3yRVtxMEQ" allowfullscreen></iframe>
                    <p>Hola, soy Paco</p>
                </div>
                <div class="video-item">
                    <iframe src="https://www.youtube.com/embed/lyZ7Z8dqx7c" allowfullscreen></iframe>
                    <p>Introducción al ADN Cliff</p>
                </div>
                <div class="video-item">
                    <iframe src="https://www.youtube.com/embed/z3qJxbdx7nA" allowfullscreen></iframe>
                    <p>Valores</p>
                </div>
                <div class="video-item">
                    <iframe src="https://www.youtube.com/embed/XAj3PMIIRlI" allowfullscreen></iframe>
                    <p>Promesa de Marca</p>
                </div>
            </div>
        </div>
    `,
            avisos: `
        <div class="fade-in">
            <div class="content-header">
                <h2 class="content-title">Avisos</h2>
                <p class="content-subtitle">Mantente informado sobre las últimas noticias y actualizaciones</p>
            </div>
        </div>
    `,
            humanos: `
        <div class="fade-in">
            <div class="content-header">
                <h2 class="content-title">Recursos Humanos</h2>
                <p class="content-subtitle">Información importante para el equipo</p>
            </div>
            
            <!-- Versión para desktop (lado a lado) -->
            <div class="rh-grid-desktop">
                <div class="rh-card">
                    <h3>Menú Semanal</h3>
                    <div class="menu-image-container">
                        <img src="img/menu.png" alt="Menú de la semana">
                    </div>
                    <p class="menu-updated">Actualizado semanalmente</p>
                </div>
                <div class="rh-card">
                    <h3>🎉 Cumpleaños del Mes</h3>
                    <div class="birthdays-container">
                        <!-- Lista de cumpleaños se cargará aquí -->
                    </div>
                </div>
            </div>
            
            <!-- Versión para móvil (uno encima del otro) -->
            <div class="rh-grid-mobile">
                <div class="rh-card">
                    <h3>Menú Semanal</h3>
                    <div class="menu-image-container">
                        <img src="img/menu.png" alt="Menú de la semana">
                    </div>
                    <p class="menu-updated">Actualizado semanalmente</p>
                </div>
                <div class="rh-card">
                    <h3>🎉 Cumpleaños del Mes</h3>
                    <div class="birthdays-container">
                        <!-- Lista de cumpleaños se cargará aquí -->
                    </div>
                </div>
            </div>
        </div>
    `,
            productos: productosTemplate,
            docs: `
        <iframe src="flipbook.html" style="width:100%; height:100%; border:none;"></iframe>
    `
        };

        // ========== FUNCIONES PARA PRODUCTOS ==========
        function renderProductos() {
            // Renderizar productos de inyección
            const inyeccionGrid = document.getElementById('inyeccion-grid');
            if (inyeccionGrid) {
                let html = '';
                productosData.inyeccion.forEach((producto, index) => {
                    // Extraer el nombre del producto del nombre del archivo
                    const nombre = producto.img.split('/').pop().replace('bot-', '').replace('.png', '').toUpperCase();
                    html += `
                <button class="producto-btn" data-drive="${producto.drive}" data-nombre="${nombre}">
                    <img src="${producto.img}" alt="Producto ${nombre}" loading="lazy">
                    <div class="producto-overlay">${nombre}</div>
                </button>
            `;
                });
                inyeccionGrid.innerHTML = html;
            }

            // Renderizar productos de pegado
            const pegadoGrid = document.getElementById('pegado-grid');
            if (pegadoGrid) {
                let html = '';
                productosData.pegado.forEach((producto, index) => {
                    // Extraer el nombre del producto del nombre del archivo
                    const nombre = producto.img.split('/').pop().replace('bot-', '').replace('.png', '').replace('_1', '').toUpperCase();
                    html += `
                <button class="producto-btn" data-drive="${producto.drive}" data-nombre="${nombre}">
                    <img src="${producto.img}" alt="Producto ${nombre}" loading="lazy">
                    <div class="producto-overlay">${nombre}</div>
                </button>
            `;
                });
                pegadoGrid.innerHTML = html;
            }

            // Agregar eventos a los botones
            document.querySelectorAll('.producto-btn').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.preventDefault();
                    const driveUrl = this.getAttribute('data-drive');
                    const nombre = this.getAttribute('data-nombre');

                    // Mostrar modal de confirmación
                    showDownloadModal(nombre, driveUrl);
                });
            });
        }

        // Función para manejar acordeones - VERSIÓN COMPATIBLE CON MÓVIL
        function setupAcordeones() {
            console.log('🔧 Configurando acordeones...');

            // Seleccionar todos los headers de acordeón
            const acordeonHeaders = document.querySelectorAll('.acordeon-header');
            console.log('Acordeones encontrados:', acordeonHeaders.length);

            // Remover event listeners anteriores si existen
            acordeonHeaders.forEach(header => {
                // Crear nuevo elemento para limpiar listeners
                const newHeader = header.cloneNode(true);
                header.parentNode.replaceChild(newHeader, header);
            });

            // Volver a seleccionar después del reemplazo
            const refreshedHeaders = document.querySelectorAll('.acordeon-header');

            refreshedHeaders.forEach((header, index) => {
                console.log(`Configurando acordeón ${index}:`, header.textContent.trim());

                // Agregar atributos para accesibilidad
                header.setAttribute('role', 'button');
                header.setAttribute('tabindex', '0');
                header.setAttribute('aria-expanded', 'false');
                header.setAttribute('aria-controls', header.getAttribute('data-acordeon') + '-content');

                // Mejorar estilo para móvil
                if (window.innerWidth <= 768) {
                    header.style.cursor = 'pointer';
                    header.style.minHeight = '60px';
                    header.style.display = 'flex';
                    header.style.alignItems = 'center';
                    header.style.justifyContent = 'space-between';
                }

                // Evento para click (mouse y toque en navegadores modernos)
                header.addEventListener('click', function (e) {
                    console.log('🖱️ Click en acordeón:', this.textContent.trim());
                    toggleAcordeon.call(this, e);
                });

                // Evento para teclado (accesibilidad)
                header.addEventListener('keydown', function (e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleAcordeon.call(this, e);
                    }
                });

                // Evento específico para touch (móvil)
                header.addEventListener('touchstart', function (e) {
                    console.log('📱 Touch en acordeón:', this.textContent.trim());
                    // Marcar como tocado para feedback visual
                    this.classList.add('touched');
                }, { passive: true });

                header.addEventListener('touchend', function (e) {
                    e.preventDefault();
                    console.log('📱 Touch end en acordeón');
                    toggleAcordeon.call(this, e);
                    this.classList.remove('touched');
                }, { passive: false });
            });

            function toggleAcordeon(e) {
                // Prevenir comportamiento por defecto si es necesario
                if (e.cancelable) {
                    e.preventDefault();
                }
                e.stopPropagation();

                const targetId = this.getAttribute('data-acordeon');
                const content = document.getElementById(`${targetId}-content`);

                if (!content) {
                    console.error('❌ Contenido no encontrado para:', targetId);
                    return;
                }

                console.log('🔄 Alternando acordeón:', targetId);

                // Verificar si ya está activo
                const isActive = this.classList.contains('active');

                // Actualizar atributo ARIA
                this.setAttribute('aria-expanded', !isActive);

                if (!isActive) {
                    // Cerrar otros acordeones
                    refreshedHeaders.forEach(otherHeader => {
                        if (otherHeader !== this) {
                            otherHeader.classList.remove('active');
                            otherHeader.setAttribute('aria-expanded', 'false');
                            const otherTarget = otherHeader.getAttribute('data-acordeon');
                            const otherContent = document.getElementById(`${otherTarget}-content`);
                            if (otherContent) {
                                otherContent.classList.remove('active');
                                otherContent.style.maxHeight = null;
                            }
                        }
                    });

                    // Abrir este acordeón
                    this.classList.add('active');
                    content.classList.add('active');
                    content.style.maxHeight = content.scrollHeight + 'px';

                    console.log('✅ Acordeón abierto:', targetId);
                } else {
                    // Cerrar este acordeón
                    this.classList.remove('active');
                    content.classList.remove('active');
                    content.style.maxHeight = null;

                    console.log('✅ Acordeón cerrado:', targetId);
                }

                // Cerrar menú móvil si está abierto
                cerrarMenuMovil();
            }

            console.log('✅ Acordeones configurados');
        }

        // Función para mostrar el modal de descarga - VERSIÓN MEJORADA
        function showDownloadModal(nombre, driveUrl) {
            const modal = document.getElementById('downloadModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalText = document.getElementById('modalText');
            const confirmBtn = document.getElementById('confirmDownload');
            const cancelBtn = document.getElementById('cancelDownload');

            modalTitle.textContent = `Descargar ${nombre}`;
            modalText.textContent = `¿Estás seguro de que quieres descargar la ficha técnica de ${nombre}?`;

            modal.classList.add('active');

            // Configurar el botón de confirmar
            confirmBtn.onclick = async function () {
                try {
                    // Deshabilitar botón mientras se procesa
                    confirmBtn.disabled = true;
                    confirmBtn.innerHTML = '<span class="loading"></span> Registrando...';

                    // 1. Primero registrar la descarga
                    const registroExitoso = await registrarDescarga(nombre, "Ficha Técnica");

                    if (registroExitoso) {
                        // 2. Después abrir el enlace de descarga
                        window.open(driveUrl, '_blank');

                        // 3. Cerrar modal después de un breve delay
                        setTimeout(() => {
                            modal.classList.remove('active');
                            // Restaurar botón
                            confirmBtn.disabled = false;
                            confirmBtn.textContent = 'Descargar';
                        }, 1000);
                    } else {
                        // Si falla el registro, mostrar error pero permitir descarga
                        mostrarNotificacion('⚠️ No se pudo registrar la descarga, pero puedes descargar el archivo', 'warning');
                        window.open(driveUrl, '_blank');
                        modal.classList.remove('active');
                        confirmBtn.disabled = false;
                        confirmBtn.textContent = 'Descargar';
                    }

                } catch (error) {
                    console.error('Error en proceso de descarga:', error);
                    // Fallback: intentar descarga de todos modos
                    window.open(driveUrl, '_blank');
                    modal.classList.remove('active');
                    confirmBtn.disabled = false;
                    confirmBtn.textContent = 'Descargar';
                }
            };

            // Configurar el botón de cancelar
            cancelBtn.onclick = function () {
                modal.classList.remove('active');
                // Asegurarse de restaurar el botón de confirmar
                confirmBtn.disabled = false;
                confirmBtn.textContent = 'Descargar';
            };

            // Cerrar modal al hacer clic fuera
            modal.onclick = function (e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    confirmBtn.disabled = false;
                    confirmBtn.textContent = 'Descargar';
                }
            };
        }

        // MODIFICAR LA FUNCIÓN cambiarSeccion
        function cambiarSeccion(section, buttonElement) {
            // Verificar permiso
            if (!verificarPermisoSeccion(section)) {
                alert('⛔ No tienes permiso para acceder a esta sección.');
                return;
            }

            // Quitar active de todos los botones
            navButtons.forEach(btn => btn.classList.remove('active'));
            mobileNavButtons.forEach(btn => btn.classList.remove('active'));

            // Agregar active al botón clickeado
            if (buttonElement) {
                buttonElement.classList.add('active');
            }

            // Cambiar contenido
            contentArea.innerHTML = contentTemplates[section];

            // Modo iframe completo para docs
            if (section === "docs") {
                contentArea.classList.add("full-iframe");
            } else {
                contentArea.classList.remove("full-iframe");
            }

            // Personalizar mensaje solo si es la sección de inicio
            if (section === "inicio") {
                personalizarMensajeBienvenida();
            }

            // Renderizar cumpleaños si es la sección de RH
            if (section === "humanos") {
                setTimeout(renderBirthdays, 100);
            }

            // Renderizar productos si es la sección de productos
            if (section === "productos") {
                setTimeout(() => {
                    renderProductos();
                    setupAcordeones();
                }, 100);
            }

            // Cerrar menú móvil si está abierto
            cerrarMenuMovil();
        }

        // ========== FUNCIONES PARA MÓVIL ==========
        function toggleMobileMenu() {
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const mobileSidebar = document.getElementById('mobileSidebar');
            const mobileOverlay = document.getElementById('mobileOverlay');

            mobileToggle.classList.toggle('active');
            mobileSidebar.classList.toggle('active');
            mobileOverlay.classList.toggle('active');
        }

        function cerrarMenuMovil() {
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const mobileSidebar = document.getElementById('mobileSidebar');
            const mobileOverlay = document.getElementById('mobileOverlay');

            mobileToggle.classList.remove('active');
            mobileSidebar.classList.remove('active');
            mobileOverlay.classList.remove('active');
        }

        // ========== SETUP EVENT LISTENERS ==========
        function setupEventListeners() {
            // Desktop nav buttons
            navButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const section = this.getAttribute('data-section');
                    cambiarSeccion(section, this);
                });
            });

            // Mobile nav buttons
            mobileNavButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const section = this.getAttribute('data-section');
                    cambiarSeccion(section, this);
                });
            });

            // Mobile menu toggle
            const mobileToggle = document.getElementById('mobileMenuToggle');
            const mobileOverlay = document.getElementById('mobileOverlay');

            if (mobileToggle) {
                mobileToggle.addEventListener('click', toggleMobileMenu);
            }

            if (mobileOverlay) {
                mobileOverlay.addEventListener('click', cerrarMenuMovil);
            }

            // Logout buttons
            const logoutBtn = document.getElementById('logout-btn');
            const logoutBtnMobile = document.getElementById('logout-btn-mobile');

            if (logoutBtn) {
                logoutBtn.addEventListener('click', function () {
                    localStorage.removeItem('currentUser');
                    window.location.href = 'index.html';
                });
            }

            if (logoutBtnMobile) {
                logoutBtnMobile.addEventListener('click', function () {
                    localStorage.removeItem('currentUser');
                    window.location.href = 'index.html';
                });
            }
        }

        // ========== FUNCIÓN PARA CONFIGURAR BOTONES DOCS ==========
        function setupDocsButtons() {
            const docsBtnDesktop = document.getElementById('docs-button');
            const docsBtnMobile = document.getElementById('docs-button-mobile');

            if (docsBtnDesktop) {
                docsBtnDesktop.addEventListener('click', function () {
                    cambiarSeccion('docs', this);
                });
            }

            if (docsBtnMobile) {
                docsBtnMobile.addEventListener('click', function () {
                    cambiarSeccion('docs', this);
                });
            }
        }

        // ========== INICIALIZACIÓN ==========
        function init() {
            console.log('Inicializando intranet...');

            // Obtener usuario actual
            usuarioInfo = obtenerUsuarioActual();

            if (!usuarioInfo) {
                // Redirigir al login si no hay usuario
                console.warn('No hay usuario, redirigiendo...');
                window.location.href = 'index.html';
                return;
            }

            console.log('Usuario:', usuarioInfo);

            // Obtener rol del usuario
            rolUsuario = obtenerRolUsuario(usuarioInfo.username);
            console.log('Rol:', rolUsuario);

            // Obtener permisos según el rol
            if (permisosPorRol[rolUsuario]) {
                permisosUsuario = permisosPorRol[rolUsuario].permisos;
            } else {
                permisosUsuario = permisosPorRol['empleado'].permisos;
            }
            console.log('Permisos:', permisosUsuario);

            // Aplicar permisos en la interfaz
            aplicarPermisosEnUI();

            // Configurar event listeners
            setupEventListeners();
            setupDocsButtons();

            // Cargar la sección inicial
            cambiarSeccion('inicio', document.querySelector('.nav-button.active'));

            // Cargar cumpleaños si es necesario
            renderBirthdays();

            console.log('Intranet inicializada correctamente');
        }

        // ========== INICIALIZAR AL CARGAR LA PÁGINA ==========
        document.addEventListener('DOMContentLoaded', function () {
            // Agregar efecto de ripple para feedback táctil
            document.body.addEventListener('touchstart', function (e) {
                const touch = e.touches[0];
                const ripple = document.createElement('div');
                ripple.className = 'touch-feedback';
                ripple.style.left = (touch.clientX - 100) + 'px';
                ripple.style.top = (touch.clientY - 100) + 'px';
                document.body.appendChild(ripple);

                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });

            // Inicializar la aplicación
            setTimeout(init, 100);
        });

        // 🔧 Registrar descarga
        async function registrarDescarga(modelo, tipo = "Ficha Técnica") {
            try {
                const usuarioActual = obtenerUsuarioActual();

                if (!usuarioActual) {
                    console.log("⚠️ No hay usuario registrado");
                    return false;
                }

                console.log("📤 Registrando descarga:", usuarioActual.username, modelo);

                // ⚠️ USAR SOLO UNA URL - ELIMINA LA DUPLICACIÓN
                const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz81OMUvpUdtXOkZDDWB6gAWEuttp_K2RfA951Hsou5bb1IZs_OaJWCjTplC3QkGXqRZQ/exec";

                // Preparar datos
                const datos = {
                    user: usuarioActual.username,
                    nombre: usuarioActual.nombreCompleto || usuarioActual.username,
                    accion: 'descarga',
                    modelo: modelo,
                    tipo: tipo,
                    fecha: new Date().toLocaleDateString('es-MX'),
                    hora: new Date().toLocaleTimeString('es-MX'),
                    resultado: 'Correcto',
                    plataforma: navigator.platform,
                    timestamp: Date.now()
                };

                console.log("📦 Datos a enviar:", datos);

                // ⚠️ ELIMINA EL MÉTODO DUPLICADO - Usa solo UNO
                // Método simple y confiable usando imagen
                const img = new Image();
                const urlParams = new URLSearchParams();

                Object.keys(datos).forEach(key => {
                    if (datos[key]) {
                        urlParams.append(key, datos[key]);
                    }
                });

                // ⚠️ IMPORTANTE: Agrega un parámetro único para evitar caché
                urlParams.append('nocache', Date.now());

                img.src = `${SCRIPT_URL}?${urlParams.toString()}`;
                console.log("✅ Registro enviado:", modelo);

                // ⭐⭐ NUEVO: ESPERAR 4 SEGUNDOS PARA EL EFECTO VISUAL ⭐⭐
                await new Promise(resolve => setTimeout(resolve, 4000));

                // Mostrar notificación DESPUÉS de los 4 segundos
                mostrarNotificacion(`✅ Registrada descarga de ${modelo}`);
                return true;

            } catch (error) {
                console.error("❌ Error al registrar descarga:", error);
                // ⭐⭐ NUEVO: ESPERAR 4 SEGUNDOS AUN CON ERROR ⭐⭐
                await new Promise(resolve => setTimeout(resolve, 4000));
                // No mostrar error para no interrumpir la descarga
                return false;
            }
        }
        // Función para mostrar notificaciones
        function mostrarNotificacion(mensaje, tipo = 'success') {
            // Crear elemento de notificación
            const notificacion = document.createElement('div');
            notificacion.innerHTML = `
        <div style="
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${tipo === 'error' ? '#dc3545' : '#28a745'};
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 9999;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease;
        ">
            <span>${mensaje}</span>
        </div>
    `;

            document.body.appendChild(notificacion);

            // Auto-eliminar después de 3 segundos
            setTimeout(() => {
                notificacion.style.animation = 'slideOutRight 0.3s ease';
                setTimeout(() => notificacion.remove(), 300);
            }, 3000);
        }

        // Agregar estilos de animación si no existen
        if (!document.getElementById('notificacion-styles')) {
            const style = document.createElement('style');
            style.id = 'notificacion-styles';
            style.textContent = `
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
    `;
            document.head.appendChild(style);
        }

    </script>
</body>

</html>